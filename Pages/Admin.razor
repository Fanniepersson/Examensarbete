@page "/admin-page"
@using Webshop.Models
@using Webshop.Models.Repositories
<PageTitle>administrate requests</PageTitle>

<div class="admin-container">
    <div class="row justify-content-center">
        <div class="col-12 col-sm-10 col-md-8 col-lg-8 col-xl-12 col-xxl-5 mt-5 active-requests">
            <MudTable Items="@Requests.Take(4)" Hover="true" Breakpoint="Breakpoint.Sm" LoadingProgressColor="Color.Info">
               <ToolBarContent>
                    <MudText Typo="Typo.h6">Booking requests</MudText>
                    <MudSpacer />
                </ToolBarContent>
                <HeaderContent>
                    <MudTh>Name</MudTh>
                    <MudTh Style="text-align:right">booking request id</MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd DataLabel="Name">@context.Firstname</MudTd>
                    <MudTd DataLabel="Id" Style="text-align:right">@context.BookingId</MudTd>
                </RowTemplate>
            </MudTable>
        </div>
    </div>
</div>
<AdministrateRequest SelectedRequest="SelectedRequest" />


@code {
    [Inject]
    IBookingRequestRepository BookingRepository { get; set; }

    private IEnumerable<BookingRequest> Requests = new List<BookingRequest>();
    private BookingRequest SelectedRequest = new();
    private string searchString = "";

    protected override async Task OnInitializedAsync()
    {
        Requests = await BookingRepository.GetAllRequests();
    }


    private async Task GetBookingRequestById(int requestId)
    {
        if (BookingRepository != null)
        {
            SelectedRequest = await BookingRepository.GetRequestById(requestId);
        }
    }
}
